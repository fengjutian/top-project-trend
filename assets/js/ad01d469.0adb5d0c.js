"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2686],{1128:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>s,contentTitle:()=>c,default:()=>g,frontMatter:()=>a,metadata:()=>i,toc:()=>u});var t=r(3974),o=(r(758),r(3805));const a={slug:"code1",title:"js\u65e5\u5fd7",authors:"fengjutian",tags:[]},c=void 0,i={permalink:"/top-project-trend/code/code1",editUrl:"https://github.com/fengjutian/top-project-trend/tree/main/code/2025-08-12-blog.md",source:"@site/code/2025-08-12-blog.md",title:"js\u65e5\u5fd7",description:"js\u65e5\u5fd7",date:"2025-08-12T00:00:00.000Z",formattedDate:"August 12, 2025",tags:[],readingTime:1.885,hasTruncateMarker:!1,authors:[{name:"fengjutian",title:"\u54c8\u54c8\u54c8\u54c8\u54c8\u54c8\ud83d\ude04",url:"https://github.com/fengjutian",page:!0,socials:{x:"",linkedin:"",github:"fengjutian",newsletter:"https://github.com/fengjutian"},imageURL:"https://avatars.githubusercontent.com/u/10450635?v=4",key:"fengjutian"}],frontMatter:{slug:"code1",title:"js\u65e5\u5fd7",authors:"fengjutian",tags:[]}},s={authorsImageUrls:[void 0]},u=[{value:"js\u65e5\u5fd7",id:"js\u65e5\u5fd7",level:3}],p={toc:u},l="wrapper";function g({components:n,...e}){return(0,o.yg)(l,(0,t.A)({},p,e,{components:n,mdxType:"MDXLayout"}),(0,o.yg)("h3",{id:"js\u65e5\u5fd7"},"js\u65e5\u5fd7"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-javascript"},"type LoggerConfigType = {\n  // \u547d\u540d\u7a7a\u95f4\n  namespace?: string\n}\n\n/**\n * \u62e6\u622a\u5668\u51fd\u6570\u7c7b\u578b\n */\ntype InterceptorFuncType = (config: LoggerConfigType) => void\n\nconst enum LogLevel {\n  Log, // \u666e\u901a\u65e5\u5fd7\n  Warning, // \u8b66\u544a\u65e5\u5fd7\n  Error, // \u9519\u8bef\u65e5\u5fd7\n}\n\nconst __DEV__ = import.meta.env.MODE\nconst Styles = ['color: green;', 'color: orange;', 'color: red;']\nconst Methods = ['info', 'warn', 'error'] as const\n\nclass Logger {\n  /** \u547d\u540d\u7a7a\u95f4\uff08scope\uff09\uff0c\u7528\u4e8e\u533a\u5206\u6240\u5728\u6267\u884c\u6587\u4ef6 */\n  private beforeFuns: Array<InterceptorFuncType> = []\n  private afterFuns: Array<InterceptorFuncType> = []\n  private config: LoggerConfigType = {}\n\n  constructor(namespace = 'unknown') {\n    this.config.namespace = `[${namespace}]`\n  }\n  /**\n   * \u521b\u5efa\u65b0\u7684 Logger \u5b9e\u4f8b\n   * \n   * @param namespace \u547d\u540d\u7a7a\u95f4\n   * @returns Logger\n   */\n  public create(namespace = 'unknown') {\n    return new Logger(namespace);\n  }\n\n  private _log(level: LogLevel, args: unknown[]) {\n    if (__DEV__ !== 'development') return\n    this.beforeFuns.forEach(func => func(this.config))\n    console[Methods[level]](`%c${this.config.namespace}`, Styles[level], ...args)\n  }\n\n  private addInterceptor(func: InterceptorFuncType, isBefore = true) {\n    if(typeof func !== 'function'){\n      return this.error('\u62e6\u622a\u5668\u51fd\u6570\u4e0d\u7b26\u5408\u89c4\u8303')\n    }\n\n    if(isBefore){\n      this.beforeFuns.push(func)\n    }\n\n    this.afterFuns.push(func)\n    return this\n  }\n\n  // \u65e5\u5fd7\u6253\u5370\u4e4b\u524d\u7684\u62e6\u622a\u5668\u53c2\u6570\n  public addBeforeFunc(func: InterceptorFuncType) {\n    this.addInterceptor(func)\n    return this\n  }\n\n  // \u65e5\u5fd7\u6253\u5370\u4e4b\u540e\u7684\u62e6\u622a\u51fd\u6570\n  public addAfterFunc(func: InterceptorFuncType) {\n    this.addInterceptor(func, false)\n    return this\n  }\n\n  /**\n   * \u6253\u5370\u8f93\u51fa\u4fe1\u606f \ud83d\udc1b\n   *\n   * @param args \u4efb\u610f\u53c2\u6570\n   */\n  public info(...args: unknown[]) {\n    this._log(LogLevel.Log, args)\n    return this\n  }\n\n  /**\n   * \u6253\u5370\u8f93\u51fa\u8b66\u544a\u4fe1\u606f \u2755\n   *\n   * @param args \u4efb\u610f\u53c2\u6570\n   */\n  public warn(...args: unknown[]) {\n    this._log(LogLevel.Warning, args)\n    return this\n  }\n\n  /**\n   * \u6253\u5370\u8f93\u51fa\u9519\u8bef\u4fe1\u606f \u274c\n   *\n   * @param args \u4efb\u610f\u53c2\u6570\n   */\n  public error(...args: unknown[]) {\n    this._log(LogLevel.Error, args)\n    return this\n  }\n\n  /**\n   * \u8bbe\u7f6e\u547d\u540d\u7a7a\u95f4\uff08\u65e5\u5fd7\u524d\u7f00\uff09\n   * @param namespace\n   */\n  public setNamespace(namespace = '') {\n    this.config.namespace = `[${namespace}]`\n    return this\n  }\n\n  /**\n   * \u8fdc\u7a0b\u4e0a\u62a5\n   */\n  public reportLog() {\n    this.info() // \u7528\u4e8e\u5728\u672c\u5730\u8f93\u51fa\n  }\n  public reportEvent() {\n    this.info()\n  }\n  public reportException() {\n    this.error()\n  }\n}\n\nexport default new Logger()\n")))}g.isMDXComponent=!0},3805:(n,e,r)=>{r.d(e,{xA:()=>p,yg:()=>m});var t=r(758);function o(n,e,r){return e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function a(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);e&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),r.push.apply(r,t)}return r}function c(n){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach(function(e){o(n,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(r,e))})}return n}function i(n,e){if(null==n)return{};var r,t,o=function(n,e){if(null==n)return{};var r,t,o={},a=Object.keys(n);for(t=0;t<a.length;t++)r=a[t],e.indexOf(r)>=0||(o[r]=n[r]);return o}(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(t=0;t<a.length;t++)r=a[t],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(n,r)&&(o[r]=n[r])}return o}var s=t.createContext({}),u=function(n){var e=t.useContext(s),r=e;return n&&(r="function"==typeof n?n(e):c(c({},e),n)),r},p=function(n){var e=u(n.components);return t.createElement(s.Provider,{value:e},n.children)},l="mdxType",g={inlineCode:"code",wrapper:function(n){var e=n.children;return t.createElement(t.Fragment,{},e)}},f=t.forwardRef(function(n,e){var r=n.components,o=n.mdxType,a=n.originalType,s=n.parentName,p=i(n,["components","mdxType","originalType","parentName"]),l=u(r),f=o,m=l["".concat(s,".").concat(f)]||l[f]||g[f]||a;return r?t.createElement(m,c(c({ref:e},p),{},{components:r})):t.createElement(m,c({ref:e},p))});function m(n,e){var r=arguments,o=e&&e.mdxType;if("string"==typeof n||o){var a=r.length,c=new Array(a);c[0]=f;var i={};for(var s in e)hasOwnProperty.call(e,s)&&(i[s]=e[s]);i.originalType=n,i[l]="string"==typeof n?n:o,c[1]=i;for(var u=2;u<a;u++)c[u]=r[u];return t.createElement.apply(null,c)}return t.createElement.apply(null,r)}f.displayName="MDXCreateElement"}}]);